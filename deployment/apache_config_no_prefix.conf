<VirtualHost *:80>
    ServerName neo-server.rozana.in
    Redirect permanent / https://neo-server.rozana.in/
</VirtualHost>

<VirtualHost *:443>
    ServerName neo-server.rozana.in
    
    # SSL Configuration
    SSLEngine on
    SSLCertificateFile /etc/letsencrypt/live/neo-server.rozana.in/fullchain.pem
    SSLCertificateKeyFile /etc/letsencrypt/live/neo-server.rozana.in/privkey.pem
    
    # Proxy FastAPI Application - NO v1/bap prefix
    ProxyPreserveHost On
    
    # Health endpoints
    ProxyPass /healthz http://localhost:8000/healthz
    ProxyPassReverse /healthz http://localhost:8000/healthz
    
    ProxyPass /livez http://localhost:8000/livez
    ProxyPassReverse /livez http://localhost:8000/livez
    
    ProxyPass /readyz http://localhost:8000/readyz
    ProxyPassReverse /readyz http://localhost:8000/readyz
    
    # ONDC endpoints - NO v1/bap prefix
    ProxyPass /onboarding http://localhost:8000/onboarding
    ProxyPassReverse /onboarding http://localhost:8000/onboarding
    
    ProxyPass /on_subscribe http://localhost:8000/on_subscribe
    ProxyPassReverse /on_subscribe http://localhost:8000/on_subscribe
    
    ProxyPass /cancel http://localhost:8000/cancel
    ProxyPassReverse /cancel http://localhost:8000/cancel
    
    ProxyPass /confirm http://localhost:8000/confirm
    ProxyPassReverse /confirm http://localhost:8000/confirm
    
    ProxyPass /init http://localhost:8000/init
    ProxyPassReverse /init http://localhost:8000/init
    
    ProxyPass /rating http://localhost:8000/rating
    ProxyPassReverse /rating http://localhost:8000/rating
    
    ProxyPass /search http://localhost:8000/search
    ProxyPassReverse /search http://localhost:8000/search
    
    ProxyPass /select http://localhost:8000/select
    ProxyPassReverse /select http://localhost:8000/select
    
    ProxyPass /status http://localhost:8000/status
    ProxyPassReverse /status http://localhost:8000/status
    
    ProxyPass /support http://localhost:8000/support
    ProxyPassReverse /support http://localhost:8000/support
    
    ProxyPass /track http://localhost:8000/track
    ProxyPassReverse /track http://localhost:8000/track
    
    ProxyPass /verification http://localhost:8000/verification
    ProxyPassReverse /verification http://localhost:8000/verification
    
    # ONDC Site Verification
    Alias /ondc-site-verification.html /var/www/html/ondc-site-verification.html
    
    # Logs
    ErrorLog ${APACHE_LOG_DIR}/ondc-bap-error.log
    CustomLog ${APACHE_LOG_DIR}/ondc-bap-access.log combined
</VirtualHost> 